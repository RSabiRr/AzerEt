@model VmHome


@{
    ViewData["Title"] = "Index";
    Layout = "~/Areas/admin/Views/Shared/_Layout.cshtml";
}

<form asp-controller="Checkouts" asp-action="Search" method="get">
    <div style="margin-left: 10px;" class="header-search-wrapper search-wrapper-wide mt-3">
        <div class="row">
            <div class="col-lg-4">
                <label for="q" class="sr-only">Search</label>
                <input type="search" class="form-control" aria-label="Search" name="searchData" placeholder="Name ...">
            </div>
            <div class="col-lg-4">
                <input type="search" class="form-control" aria-label="Search" name="email" placeholder="Email ...">
            </div>
            <div class="col-lg-4">
                <button style="background:red" class="btn " type="submit"><i class="fas fa-search" style="color: white;"></i></button>

            </div>




        </div>


    </div><!-- End .header-search-wrapper -->
</form>

<div style="    margin-top: 25px;" class="col-lg-12 mb-3">
    <a asp-controller="Checkouts" asp-action="downloadtoexcel"><img src="~/assets/img/excel.png" alt="Alternate Text" width="50" /></a>
</div>
<table class="table">
    <thead>
        <tr>
            <th>
                @Html.DisplayNameFor(model => model.CustomUser.Name)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.CustomUser.Surname)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.CustomUser.Email)
            </th>

            <th>
                @Html.DisplayNameFor(model => model.CustomUser.Phone)
            </th>
          
            <th>
                @Html.DisplayNameFor(model => model.Checkout.Adress)
            </th>
       
            <th>
                @Html.DisplayNameFor(model => model.Checkout.ContactPhone)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.Checkout.Iscart)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.Checkout.TotalPrice)
            </th>

            <th>
                @Html.DisplayNameFor(model => model.Checkout.CreatedDate)
            </th>

        </tr>
    </thead>
    <tbody>

        @foreach (var item in Model.Checkouts)
        {
            <tr>
                <td>
                    @Html.DisplayFor(modelItem => item.CustomUser.Name)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.CustomUser.Surname)
                </td>

                <td>
                    @Html.DisplayFor(modelItem => item.CustomUser.Email)
                </td>


                <td>
                    @Html.DisplayFor(modelItem => item.CustomUser.Phone)
                </td>
            

                <td>
                    @Html.DisplayFor(modelItem => item.Adress)
                </td>
              
                <td>
                    @Html.DisplayFor(modelItem => item.ContactPhone)
                </td>
                <td>
                    @if (item.Iscart == true)
                    {
                        <p>Cart</p>
                    }
                    else
                    {
                        <p>Cash</p>

                    }
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.TotalPrice)
                </td>

                <td>
                    @Html.DisplayFor(modelItem => item.CreatedDate)
                </td>

                <td>
                    <a class="btn btn-success" asp-action="Details" asp-route-userId="@item.UserId" asp-route-id="@item.Id">Details</a> |
                    <a class="btn btn-danger" asp-action="Delete" asp-route-id="@item.Id">Delete</a>
                </td>
            </tr>
        }
    </tbody>
</table>
<script>
    var a = document.getElementById("foralert").textContent;
    console.log(a);
    window.setTimeout(

        function () {
            location.reload();
            if (a > 0) {
                const audio = new Audio();
                audio.src = "../music/message.mp3";
                audio.play();
                alert("Diqqət! yeni sifariş var!")

            }
        },
        10000);
</script>